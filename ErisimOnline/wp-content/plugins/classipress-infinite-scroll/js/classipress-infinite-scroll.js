/**
 * @package ClassiPress Infinite Scroll
 * @version 1.4
 * @author Julio Gallegos <thesaneroner@gmail.com>
 */
 
 
(function(a){a.myClassiPro=function(q){var b=a.extend({},a.myClassiPro.defaults,q);var j=this;var k=a(document);p();function p(){n();return j}function n(){a(b.pagination).hide();k.scroll(i)}function i(){scrTop=k.scrollTop();wndHeight=k.height();curScrOffset=scrTop+wndHeight;if(curScrOffset>=f()){h(curScrOffset)}}function o(){k.unbind("scroll",i)}function f(r){el=a(b.container).find(b.ads).last();if(el.size()==0){return 0}treshold=el.offset().top+el.height();if(!r){treshold+=b.tresholdMargin}return treshold}function d(s){var r=a(".total",b.pagination).text();if(b.page=="dash"){s.after("<tr class='mcp-pages-dash'><td colspan=5>"+r+"</td></tr>")}else{s.after("<p class='mcp-pages'>"+r+"</p>")}}function h(t,s){var r=a(b.container).find(b.ads).last();var temp = a(b.next).next();var urlNextPage;if(temp.is('form')) {urlNextPage = temp.attr("action");}else {urlNextPage = temp.attr("href");}if(!urlNextPage){if(b.showpages){d(r)}return o()}o();l();e(urlNextPage,function(v,u){a(u).hide();r.after(u);if(b.showpages){d(r)}a(u).fadeIn();a(b.pagination).replaceWith(a(b.pagination,v));c();n()})}function e(s,t){var r=[];a.get(s,null,function(u){container=a(b.container,u).eq(0);if(0==container.length){container=a(u).filter(b.container).eq(0)}if(container){container.find(b.ads).each(function(){r.push(this)})}if(t){t.call(this,u,r)}},"html")}function m(r){curTreshold=f(true);if(curTreshold>0){h(curTreshold,function(){o();a("html,body").animate({scrollTop:curTreshold},1000,"swing");n()})}}function g(){loader=a(".mcp-loader");if(loader.size()==0){loader=a("<div class='mcp-loader'><img src='"+b.loader+"' alt='' /></div>");loader.hide()}return loader}function l(){loader=g();el=a(b.container).find(b.ads).last();el.after(loader);loader.fadeIn()}function c(){loader=g();loader.remove();imagePreview();}};a.myClassiPro.defaults={showpages:true,container:".content_left",ads:".post-block-out",pagination:".paging",next:".current",tresholdMargin:0,}})(jQuery);